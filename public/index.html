<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ibodulla.official ‚Äî Admin / Tokens</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root{
  --green:#2e7d32;
  --dark:#233;
  --muted:#666;
  --bg:#f5f6fa;
  --card:#ffffff;
  --accent:#1b5e20;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Segoe UI",Roboto,Arial,sans-serif;background:var(--bg);color:var(--dark);}
a{color:inherit;text-decoration:none}
button{font-family:inherit}
.app-shell{display:flex;min-height:100vh;align-items:stretch;}
.sidebar{
  width:240px;background:var(--card);padding:18px;border-right:1px solid rgba(0,0,0,0.04);
  position:fixed;left:0;top:0;bottom:0;overflow:auto;box-shadow:2px 0 8px rgba(0,0,0,0.04);transition:transform .28s ease;
  z-index:1200;
}
.sidebar h2{text-align:center;color:var(--green);margin:2px 0 14px;font-size:18px}
.group-list a, .main-menu a{display:block;padding:10px 12px;border-radius:8px;margin:6px 0;color:#333;cursor:pointer}
.group-list a:hover,.main-menu a:hover{background:var(--green);color:white}
.group-list a.active{background:var(--green);color:white}
.sidebar .small{font-size:13px;color:var(--muted);margin-top:6px;text-align:center}
.main{margin-left:240px;flex:1;padding:18px 20px 120px;transition:margin-left .28s ease;}
header.top{display:flex;align-items:center;justify-content:space-between;background:var(--card);padding:12px 16px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.06)}
header .left{display:flex;align-items:center;gap:12px}
.hamburger{display:none;font-size:20px;background:none;border:0;color:var(--green);cursor:pointer}
header h1{margin:0;color:var(--green);font-size:18px}
header .user{font-size:14px;color:#333;display:flex;flex-direction:column;align-items:flex-end}
header .user .name{font-weight:600}
header .user button{margin-top:6px;background:#c62828;color:white;border:0;padding:6px 10px;border-radius:6px;cursor:pointer;font-size:13px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;margin:18px 0}
.card{background:var(--card);padding:14px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.04)}
.card h3{margin:0 0 10px;color:#333;font-size:15px}
.highlight{font-size:20px;font-weight:700;color:var(--green)}
table{width:100%;border-collapse:collapse;background:var(--card);border-radius:10px;overflow:hidden;box-shadow:0 2px 6px rgba(0,0,0,0.04)}
th,td{padding:10px;text-align:left;border-bottom:1px solid #f0f0f0}
th{background:#fafafa;color:var(--muted);font-weight:600}
td.center{text-align:center}
.btn{padding:8px 10px;border-radius:8px;border:0;cursor:pointer}
.btn-primary{background:var(--green);color:white}
.btn-danger{background:#c62828;color:white}
.choice{display:inline-block;padding:6px 10px;border-radius:20px;border:1px solid #e0e0e0;background:#f7f7f7;cursor:pointer}
.choice.active{background:var(--green);color:white;border-color:var(--green)}
input[type="text"],input[type="number"],input[type="password"],select{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;margin:6px 0;box-sizing:border-box;}
.row{display:flex;gap:10px;align-items:center}
.col{flex:1}
.footer-marquee{position:fixed;left:0;right:0;bottom:0;background:var(--accent);color:white;padding:10px;text-align:left;font-weight:600;z-index:1100}
@media(max-width:900px){
  .sidebar{transform:translateX(-100%)} 
  .sidebar.open{transform:translateX(0)}
  .main{margin-left:0}
  .hamburger{display:inline-block}
}
.muted{color:var(--muted);font-size:13px}
.tiny{font-size:12px;color:#888}
</style>
</head>
<body>
<div class="app-shell">
  <aside class="sidebar" id="sidebar" aria-label="left sidebar">
    <h2>Ibodulla.official</h2>
    <div class="main-menu">
      <a id="navAdmin">‚öôÔ∏è Admin</a>
      <a id="navTokens">üîê Tokens</a>
    </div>
    <hr style="border:none;height:8px">
    <div class="muted" style="text-align:center">Guruhlar</div>
    <div class="group-list" id="groupList"></div>
    <div class="sidebar-footer small">
      <div style="margin-top:12px">¬© Ibodulla.official</div>
    </div>
  </aside>
  <main class="main" id="main">
    <header class="top">
      <div class="left">
        <button class="hamburger" id="hamburgerBtn">&#9776;</button>
        <h1 id="pageTitle">Admin ‚Äî Guruh 1</h1>
      </div>
      <div class="user" id="userBox">
        <div class="name" id="userName">Ishchi</div>
        <div class="tiny" id="userSub">education_of_ibodulla</div>
        <button id="logoutBtn" style="display:none">Chiqish</button>
      </div>
    </header>
    <div id="pageContent"></div>
  </main>
</div>
<div class="footer-marquee">
  <i class="fab fa-instagram" style="color:#e1306c;margin-right:8px"></i> education_of_ibodulla ‚ú®
</div>

<script>
/* ========== Seed data ========== */
const seedStudents = [
  { id: "s0", name: "Humoyun Abdumominov", phone:"+998901112200", token:"token0", group:0, coins:0 },
  { id: "s1", name: "Abdulatif Anorov", phone:"+998901112201", token:"token1", coins:0 }
];
const groups = [
  { id:0, name:"1-guruh", time:"08:00-10:00" },
  { id:1, name:"2-guruh", time:"10:00-12:00" }
];
function getStudents(){ const raw = localStorage.getItem('eoib_students'); if(!raw){ localStorage.setItem('eoib_students', JSON.stringify(seedStudents)); return JSON.parse(JSON.stringify(seedStudents)); } return JSON.parse(raw); }
function setStudents(arr){ localStorage.setItem('eoib_students', JSON.stringify(arr)); window.dispatchEvent(new Event('storage')); }
let students = getStudents();

/* ========== UI ELEMENTS ========== */
const pageContent = document.getElementById('pageContent');
const pageTitle = document.getElementById('pageTitle');
const groupListEl = document.getElementById('groupList');
const sidebarEl = document.getElementById('sidebar');
const hamburgerBtn = document.getElementById('hamburgerBtn');

/* ========== RENDER GROUP LIST ========== */
function renderGroupList(){
  groupListEl.innerHTML = '';
  groups.forEach(g=>{
    const a = document.createElement('a');
    a.textContent = `${g.name} (${g.time})`;
    a.dataset.group = g.id;
    a.className = 'group-item';
    a.onclick = ()=>{ renderAdmin(g.id); pageTitle.innerText = `${g.name} ‚Äî Admin`; closeSidebarOnMobile(); };
    groupListEl.appendChild(a);
  });
}
renderGroupList();
function closeSidebarOnMobile(){ if(window.innerWidth <= 900) sidebarEl.classList.remove('open'); }

/* ========== ADMIN PAGE ========== */
function renderAdmin(groupId = 0){
  const groupStudents = students.filter(s=>s.group===groupId);
  let html = `<div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
    <div style="flex:1;min-width:240px" class="card">
      <h3>Guruh: ${groups[groupId].name} <span class="tiny">(${groups[groupId].time})</span></h3>
      <p class="muted">Bu panel orqali coin va studentlarni boshqarish mumkin.</p>
      <div style="margin-top:8px">
        <label class="tiny">Yangi o‚Äòquvchi qo‚Äòshish</label>
        <input type="text" id="newName" placeholder="Ism Familiya"/>
        <input type="text" id="newPhone" placeholder="Telefon raqami"/>
        <input type="text" id="newPass" placeholder="Parol"/>
        <button class="btn btn-primary" id="createStudentBtn" style="margin-top:6px">+ Qo'sh</button>
      </div>
    </div>
  </div>`;

  html += `<div style="margin-top:14px" class="card">
    <h3>O'quvchilar ro'yxati</h3>
    <table>
      <thead><tr><th>#</th><th>Ism</th><th>Telefon</th><th>Coin</th><th>Token</th></tr></thead>
      <tbody>${groupStudents.map((s,i)=>`<tr>
        <td>${i+1}</td>
        <td>${s.name}</td>
        <td>${s.phone}</td>
        <td class="center">${s.coins} üí∞</td>
        <td class="center">${s.token}</td>
      </tr>`).join('')}</tbody>
    </table>
  </div>`;
  pageContent.innerHTML = html;

  document.getElementById('createStudentBtn').onclick = ()=>{
    const name = document.getElementById('newName').value.trim();
    const phone = document.getElementById('newPhone').value.trim();
    const pass = document.getElementById('newPass').value.trim();
    if(!name||!phone||!pass){alert("Barcha maydonlarni to‚Äòldiring"); return;}
    const newId = `s${Date.now()}`;
    const newToken = 'tkn'+Math.random().toString(36).substring(2,10);
    const newStudent = {id:newId,name,phone,pass,token:newToken,group:groupId,coins:0};
    students.push(newStudent);
    setStudents(students);
    renderAdmin(groupId);
  };
}

/* ========== TOKENS PAGE ========== */
function renderTokens(){
  let html = `<div class="card"><h3>Tokens</h3>
    <table>
      <thead><tr><th>#</th><th>Ism</th><th>Token</th></tr></thead>
      <tbody>${students.map((s,i)=>`<tr><td>${i+1}</td><td>${s.name}</td><td>${s.token}</td></tr>`).join('')}</tbody>
    </table>
  </div>`;
  pageContent.innerHTML = html;
}

/* ========== NAVIGATION ========== */
document.getElementById('navAdmin').onclick = ()=>{ renderAdmin(0); pageTitle.innerText='Admin'; };
document.getElementById('navTokens').onclick = ()=>{ renderTokens(); pageTitle.innerText='Tokens'; };

/* ========== HAMBURGER ========== */
hamburgerBtn.onclick = ()=>{ sidebarEl.classList.toggle('open'); };

/* ========== INIT ========== */
renderAdmin(0);
</script>
</body>
</html>
